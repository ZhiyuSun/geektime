# 计算机基础

## 计算机组成

存储器：内存，磁盘，SSD
运算器：CPU，显卡
主板
输入设备：键盘，鼠标
输出设备：显示器，音箱
散热器，电源，机箱

存储器和运算器：稀缺的计算机资源

计算资源：CPU，显卡
存储资源：内存，磁盘，SSD
网络资源

### CPU

稀缺的资源

赫兹，1Hz = 1次/秒

2GHz=每秒20亿次

单核CPU，性能
摩尔定律：价格不变时，集成电路元器件数目，约每隔18-24个月翻一倍

摩尔定律主键失效，5nm，7nm

多核CPU

内核：运算器+控制器+高速缓存

控制器：程序计数器+时序发生器+指令译码器+各种寄存器
控制器是协调和控制计算机运行的

运算器：数据缓冲器+ALU+通用寄存器+状态字寄存器
运算器是用来数据运算加工的

CPU的功能
- 控制程序的顺序运行
- 产生完成每条指令所需的控制指令
- 对各种操作加以时间上的控制
- 对数据进行算术运算和逻辑加工

### 存储器

**存储器概述**

速度，容量，价格
位价：每比特位价格

**存储器的层次结构**

缓存：速度快，位价高，cpu
主存：内存
辅存：速度慢，位价低。磁盘

局部性原理：CPU访问存储器时，无论是存取指令还是存取数据，所访问的存储单元都趋于聚集在一个较小的连续区域中。

**局部性原理**

缓存-主存层次：
- 原理：局部性原理
- 实现：在CPU与主存之间增加一层速度快（容量小）的Cache
- 目的：解决主存速度不足的问题

主存-辅存层次
- 原理：局部性原理
- 实现：主存之外增加辅助存储器（磁盘，sd卡，u盘等）
- 目的：解决主存容量不足的问题

## 操作系统

发展历史
操作系统介于硬件和用户之间

发展历史：
无操作系统——批处理系统——分时系统

多道程序设计
- 早期批处理系统只能一次处理一个任务
- 多道程序设计使得批处理系统可以一次处理多个任务
- 多道程序设计是指在计算机内存中同时存放多个程序
- 多道程序在计算机的管理程序之下相互穿插运行

### 基本功能

处理器资源
IO设备资源
存储器资源
文件资源

操作系统统一管理着计算机资源，驱动

用户无需面向硬件接口编程
IO设备管理软件，虚拟设备
文件管理软件

操作系统实现了对计算机资源的抽象
操作系统提供了用户与计算机之间的接口

用户——应用程序——系统调用、命令、图形窗口——操作系统——计算机硬件

图形窗口
- 手机屏幕操作
- 计算机显示器+键盘鼠标

命令行

系统调用
- 创建进程
- 打开文件
- 网络发送

操作系统基本功能
- 操作系统统一管理着计算机资源
- 操作系统实现了对计算机资源的抽象
- 操作系统提供了用户与计算机之间的接口

### 用户态和内核态

处理器资源：显卡，cpu
存储器资源：内存，磁盘
IO设备资源
文件资源

linux设计的哲学
- 对不同的操作赋予不同的执行等级（特权）
- 与系统相关的一些特别关键的操作必须由最高特权的程序来完成

内核态
- 内核空间：存放的是内核代码和数据
- 进程执行操作系统内核的代码
- CPU可以访问内存所有数据，包括外围设备

用户态
- 用户空间：存放的是用户程序的代码和数据
- 进程在执行用户自己的代码（非系统调用之类的函数）
- CPU只可以访问有限的内存，不允许访问外设

4G空间，内核空间：用户空间，约为1:3

用户态——切换内核态
- 系统调用
- 异常中断
- 外围设备中断

## 基础概念

### 并行与并发

并发：两个或多个事件可以在同一个时间间隔发生
并行：两个或多个事件可以在同一个时刻发生

单核CPU只能发生并发，不能发生并行
多核cpu能发生并行和并发，里面的单核都是并发

并行是并发的子集

### 同步与异步

同步：一直打电话，等待
异步：发一个短信

调用方的阻塞和非阻塞状态

同步和异步强调的是消息通信机制
阻塞和非阻塞强调的是程序在等待调用结果时的状态

读写磁盘，读写网络，一般采用同步的方式读取
我需要读取1g的数据，一段时间后通知你，异步。

异步怎么实现的？后面的内容

### 计算密集型和IO密集型

安装sysstat工具

sar -u 5 10  统计CPU
sar -b 5 10  统计磁盘

计算阶乘：占用CPU
往磁盘写1G文件：既占用cpu,也占用磁盘

计算机密集型
- 也成为CPU密集型（cpu bound）
- 完成一项任务的时间取决于CPU的速度
- CPU利用率高、（导致）其他事情处理慢

IO密集型
- 频繁读写网络、磁盘等任务都属于IO密集型任务
- 完成一项任务的时间取决于IO设备的速度
- CPU利用率低、大部分时间在等待设备完成

计算密集：
游戏画面渲染，AI模型训练，视频解码，图片卷积处理

IO密集：
web应用，复制粘贴，下载工具

