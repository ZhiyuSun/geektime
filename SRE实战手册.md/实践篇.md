## 06 | 故障发现：如何建设On-Call机制？

### 聚焦 MTTR，故障处理的关键环节

### MTTI：从发现故障到响应故障

MTTI，就是故障的平均确认时间，也就是从故障实际发生时间点，到触发采取实际行动去定位前的这段时间。

这个环节其实主要有两件事情要做：第一件事，判断出现的问题是不是故障；第二件事，确定由谁来响应和召集。我们一一来看。

### 关于 On-Call 的两个案例

这种错时保障机制，很多电商企业在大促保障或者重大活动期间也经常用，就是确保关键角色必须在线，随时应急响应。

### On-Call 的流程机制建设

1. 确保关键角色在线。
2. 组织 War Room 应急组织。
3. 建立合理的呼叫方式。

无论是 SRE、架构师，还是一线开发，熟悉某个系统的最快最好的方式就是参与 On-Call，而不是看架构图和代码。

所以，有效的 On-Call 机制，可以让团队更深刻地认识到目前系统的存在哪些问题，对自己的痛苦状态也会有更深刻的感受，进而对后面的改进措施才能更有针对性和落地性。同时，On-Call 也可以培养和锻炼新人和 Backup 角色，这也是让新人尽快融入团队和承担责任的最好的方式。

4. 确保资源投入的升级机制。

5. 与云厂商联合的 On-Call。

## 07｜故障处理：一切以恢复业务为最高优先级

上一讲我们讨论了 MTTR 的第一个环节，也就是 MTTI（故障发现）阶段的应对措施。今天我们继续来看 MTTR 的另外三个环节，也就是 MTTK、MTTF 和 MTTV 阶段，这三个对应的就是故障诊断、修复与确认，我们一起来看在这些环节应该做好哪些事情。

今天的内容，我会围绕一条基本原则展开，那就是：在故障处理过程中采取的所有手段和行动，一切以恢复业务为最高优先级。这也是我们故障处理过程中的唯一目标，没有第二个。

后来，我们复盘总结，认为这次故障的发生和持续蔓延有三个原因。
- 第一个，故障隔离手段缺失。
- 第二，关键角色和流程机制缺失。
- 第三，没有演练。

### 如何建立有效的故障应急响应机制

## 08｜故障复盘：黄金三问与判定三原则

### 故障复盘的黄金三问

经历过这样很痛苦的阶段后，我们总结出一条很重要的经验和观点，甚至是颠覆你对故障根因认知的观点：故障根因不止一个，与其争论根因是什么，不如一起看看引起故障的原因都有哪些，是不是都有改进的空间。

那这些原因和环节该怎么找呢？我们在做故障复盘的时候，首先会结合 Timeline 来做，也就是按照 MTTI、MTTK、MTTF 和 MTTV 先做一个分类；然后针对耗时长的环节，反复讨论改进措施是什么；最后定好责任人和时间点，后续持续跟进执行状况。

如果把这些经验再提炼一下，那就是我们总结出来的故障复盘黄金三问：
- 第一问：故障原因有哪些？
- 第二问：我们做什么，怎么做才能确保下次不会再出现类似故障？
- 第三问：当时如果我们做了什么，可以用更短的时间恢复业务？

### 故障判定的三原则

1. 健壮性原则。
2. 第三方默认无责。
3. 分段判定原则。

## 09｜案例：互联网典型的SRE组织架构是怎样的？

第一，组织架构要与技术架构相匹配。
第二，SRE 是微服务和分布式架构的产物。

那么，想要引入 SRE 体系，并做对应的组织架构调整，首先要看我们的技术架构是不是在朝着服务化和分布式的方向演进。如果架构还没这么复杂，其实也没有必要引入 SRE 这么复杂的运维体系，这本身就不匹配；再就是如果没有对应的架构支持，SRE 技术层面的建设就没有切入点，想做也没法做。

总的来说，如果我们的技术架构朝着微服务和分布式的方向演进，那我们可以考虑落地 SRE，这时候，我们的组织架构就要匹配我们的技术架构，也就是说，要想在组织内引入并落地 SRE 这套体系，原有技术团队的组织架构，或者至少是协作模式必须要做出一些变革才可以。

## 10 | 经验：都有哪些高效的SRE组织协作机制？

### 什么是“以赛带练”？

### SRE 的各个角色如何协作？

## 结束语｜聊聊我的SRE落地心路历程

如果总结下我自己实践 SRE 的心路历程，我觉得王阳明《传习录》里的“知者行之始，行者知之成”就特别恰当、准确。

纠结在这样那样的问题中，结果就是在问题漩涡中停滞不前，迈不出第一步，那就永远都走不前去。

## 答疑｜没什么能阻挡你拓展边界的渴望

小团队，实践 SRE 可以从哪些方面入手？中小型公司资源有限，怎么做才能让系统全方位地稳定起来呢？

如何定义一个故障？有什么具体方法吗？粒度怎么界定？

SRE 是否需要从项目开始就参与系统架构设计？如果只是在项目上线运行后才接触，遇到架构不合理的地方如何处理？

国内传统行业的 SRE 组织架构是什么样的，有必要设置 SRE 岗位吗？

DevOps 和 SRE 有什么区别？

在工作职责和经验有限的情况下，怎么不断提升自己，拓展自己的能力边界？怎么提高英语水平？怎么提升编码能力？
- 我觉得对于我们技术人来说，最好的提升自己的方式就是实践，解决实际问题，然后思考总结，比如输出总结文章等等。解决的问题越多，能力自然会提升，边界和视野自然会打开。
- 学习真的就是这样一点一滴积累，耐住性子，一开始可能积累得会比较慢，但是慢慢地就会越来越快。
- 所以，最终的建议就是，从现在开始，先做起来再说吧。



