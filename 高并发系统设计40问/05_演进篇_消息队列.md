# 演进篇_消息队列

## 17 | 消息队列：秒杀时如何处理每秒上万次的下单请求？

### 削去秒杀场景下的峰值写流量

### 通过异步处理简化秒杀请求中的业务流程

削峰填谷，异步处理，解耦

### 解耦实现秒杀系统模块之间松耦合

异步处理、解耦合和削峰填谷是消息队列在秒杀系统设计中起到的主要作用，其中异步处理可以简化业务流程中的步骤，提升系统性能；削峰填谷可以削去到达秒杀系统的峰值流量，让业务逻辑的处理更加缓和；解耦合可以将秒杀系统和数据系统解耦开，这样两个系统的任何变更都不会影响到另一个系统

如果你的系统想要提升写入性能实现系统的低耦合，想要抵挡高并发的写流量，那么你就可以考虑使用消息队列来完成。

当然，你要知道，在使用消息队列之后虽然可以解决现有的问题，但是系统的复杂度也会上升。比如上面提到的业务流程中，同步流程和异步流程的边界在哪里？消息是否会丢失，是否会重复？请求的延迟如何能够减少？消息接收的顺序是否会影响到业务流程的正常执行？如果消息处理流程失败了之后是否需要补发？这些问题都是我们需要考虑的。我会利用接下来的两节课针对最主要的两个问题来讲讲解决思路：一个是如何处理消息的丢失和重复，另一个是如何减少消息的延迟。

引入了消息队列的同时也会引入了新的问题，需要新的方案来解决，这就是系统设计的挑战，也是系统设计独有的魅力，而我们也会在这些挑战中不断提升技术能力和系统设计能力。

## 18 | 消息投递：如何保证消息仅仅被消费一次？

### 消息为什么会丢失

么消息从被写入到消息队列到被消费者消费完成，这个链路上会有哪些地方存在丢失消息的可能呢？其实主要存在三个场景：

消息从生产者写入到消息队列的过程；
消息在消息队列中的存储场景；
消息被消费者消费的过程。

1. 在消息生产的过程中丢失消息

针对这种情况，我建议你采用的方案是消息重传

2. 在消息队列中丢失消息

3. 在消费的过程中存在消息丢失的可能

### 如何保证消息只被消费一次

## 19 | 消息队列：如何降低消息队列系统中消息的延迟？

### 如何监控消息延迟

## 20 | 面试现场第二期：当问到项目经历时，面试官究竟想要了解什么？

## 期中测试 | 10道高并发系统设计题目自测

